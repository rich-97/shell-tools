#!/usr/bin/env bash
 
list=${PATH//:/' '}
list=${list//\}/' '}
list=${list//\{/' '}

_lsbin () {
  sum=0
  for i in $list; do
    if [ -d "$i" ]; then
      files=$(ls -R "$i")
      
      for j in $files; do
        if [ -x "$i/$j" -a -f "$i/$j" ]; then
          kb="$(du -k "$i/$j" | cut -f 1 )"
          let sum+=1
          color yellow; echo -n "$j: "
          color green; echo "${kb}kb"
        fi
      done
    else
        color red; echo "Invalid directory $i."
    fi
  done

  color blue; echo "total: $sum"; color
}

_lsbin

